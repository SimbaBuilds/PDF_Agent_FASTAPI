{"timestamp": "2025-12-05T03:04:15.599172+00:00", "level": "INFO", "logger": "app.utils.supabase_singleton", "message": "Supabase singleton client created successfully with 20 max connections", "module": "supabase_singleton", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/supabase_singleton.py", "lineno": 98, "funcName": "_create_client"}
{"timestamp": "2025-12-05T03:04:15.599362+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Received chat request: message='what is CD-150?', history_count=1, preferences=None, integration_in_progress=False, request_id=web-chat-1764903855376-98bbh971n", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 71, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:15.751509+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Error checking limits for user 1a473152-13b8-44f8-bf95-21b6f025ea5a: {'message': \"Could not find the table 'public.user_profiles' in the schema cache\", 'code': 'PGRST205', 'hint': None, 'details': None}", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 140, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:15.751746+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Failed to create/update request record: name 'update_result' is not defined", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 179, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:15.751823+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Using existing conversation: 3ff55c8f-f620-4526-bdef-f0d8b784f252", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 207, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:16.063083+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Stored user message for conversation: 3ff55c8f-f620-4526-bdef-f0d8b784f252", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 278, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:16.206301+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Failed to update request status to thinking: {'message': \"Could not find the table 'public.requests' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.posts'\", 'details': None}", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 295, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:16.206659+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Initialized AnthropicProvider with model: claude-haiku-4-5-20251001", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 244, "funcName": "__init__", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:16.207101+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent using standard (uncached) system prompt", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 201, "funcName": "__init__", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:16.207163+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent initialized with system prompt", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "action": "agent_initialization", "agent_name": "PDF Agent", "system_prompt": "=== Context ===\nYou are a helpful AI assistant. Your capabilties are outlined in the tool descriptions below.\n=== Response Template ===\nYou must respond with valid JSON in one of the following two formats:\n1. When an action IS needed (calling a tool or sub agent):\n```json\n{{\n  \"thought\": \"Your reasoning about what action to take\",\n  \"type\": \"action\",\n  \"action\": {{\n    \"name\": \"action_name\",\n    \"parameters\": {{...}}\n  }}\n}}\n```\nOR\n2. When NO action or NO FURTHER ACTION is needed:\n```json\n{{\n  \"thought\": \"Your reasoning about why no action is needed\", \n  \"type\": \"response\",\n  \"response\": \"Your response\"\n}}\n```\nAlways output valid JSON.  Only one JSON block per response. Think first in the \"thought\" field, then specify the type and appropriate action or response.\n=== Available Actions ===\n```\nName: fetch_pdf_content:\nDescription: Search and retrieve content from uploaded PDF documents. Use 'semantic' search for natural language queries about topics or concepts. Use 'grep' search for specific terms, codes, or exact text patterns.\nAction Parameters:\n    - search_type (string): Search method: 'semantic' for natural language similarity search, 'grep' for exact text pattern matching. Default: 'semantic'\n    - query (string): Search query - for semantic: describe what you're looking for; for grep: the exact text pattern to find\n    - pdf_id (string): Optional: Specific PDF ID to search within. If not provided, searches all user's PDFs.\n    - max_results (integer): Maximum number of results to return. Default: 5\nReturns: JSON object with search results containing page content, page numbers, and relevance scores\nExample Invocation: Action: fetch_pdf_content: {\"search_type\": \"semantic\", \"query\": \"information about AI iterations and human intervention\"}\n```\n\n```\nName: search_pdf_documents:\nDescription: Search for PDF documents by filename. Returns document metadata including document ID, filename, number of pages, and file size. Use this to find which PDFs are available before searching their content with fetch_pdf_content.\nAction Parameters:\n    - filename_query (string): Search term to match against PDF filenames (case-insensitive partial match)\n    - max_results (integer): Maximum number of results to return. Default: 10\nReturns: JSON object with document metadata including document_id, filename, title, num_pages, file_size_bytes, status, and created_at\nExample Invocation: Action: search_pdf_documents: {\"filename_query\": \"report\"}\n```\n\n```\nName: create_pdf:\nDescription: Create a new PDF document containing a summary or report. Use this to generate documents from content you've gathered or created during the conversation.\nAction Parameters:\n    - title (string): Title for the PDF document\n    - content (string): The text content to include in the PDF. Supports basic markdown formatting (headers with #, bullet points with -).\n    - content_type (string): Type of document: 'summary' for brief summaries, 'report' for detailed reports. Default: 'summary'\n    - source_pdf_ids (array): Optional list of PDF IDs that were used as sources for this document\nReturns: JSON object with success status, PDF ID, and filename. The PDF ID can be used with email_pdf to send the document.\nExample Invocation: Action: create_pdf: {\"title\": \"Research Summary\", \"content\": \"# Key Findings\\n- Point 1\\n- Point 2\", \"content_type\": \"summary\"}\n```\n\n```\nName: email_pdf:\nDescription: Send a PDF document to a recipient via email. You will need the user's name and email so if you don't it, please ask them. Use create_pdf first to generate the document, then use this tool to send it.\nAction Parameters:\n    - pdf_id (string): ID of the PDF to send (obtained from create_pdf tool)\n    - recipient_email (string): Email address of the recipient\n    - recipient_name (string): Name of the recipient\n    - subject (string): Optional email subject line. Defaults to the PDF title.\n    - message (string): Optional message to include in the email body\nReturns: JSON object with success status and email ID\nExample Invocation: Action: email_pdf: {\"pdf_id\": \"abc123-def456\", \"recipient_email\": \"user@example.com\", \"recipient_name\": \"John Doe\", \"subject\": \"Your requested document\"}\n```\n\n```\nName: perplexity_search:\nDescription: Perform a general web search using Perplexity AI. Use this to find information that may not be in the uploaded PDFs.\nAction Parameters:\n    - query (string): Search query\n    - max_tokens (integer): Maximum tokens (default: 2000, max: 4000)\n    - temperature (number): Temperature (0.0-2.0, default: 0.1)\n    - system_prompt (string): System prompt for the model\nReturns: JSON object with search results and citations\nExample Invocation: Action: perplexity_search: \"{\"query\": \"latest research on renewable energy\"}\"\n```\n=== General Instructions ===\n- When your response to another agent includes cached data, include the cache key in your response rather than the cached content itself.  All agents have the fetch_from_cache tool.\n=== Additional Instructions/Context ===\n\n- Current date/time: 2025-12-04 21:04:16\nGuidelines:\n- Keep responses concise unless the user asks for more detail\n- Always cite which PDF/page the information came from when retrieving content\n"}
{"timestamp": "2025-12-05T03:04:16.207224+00:00", "level": "INFO", "logger": "app.agents.primary_agent.primary_agent", "message": "Initialized PDF Agent for user 1a473152-13b8-44f8-bf95-21b6f025ea5a", "module": "primary_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/primary_agent/primary_agent.py", "lineno": 123, "funcName": "__init__"}
{"timestamp": "2025-12-05T03:04:16.207269+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Starting query processing for user 1a473152-13b8-44f8-bf95-21b6f025ea5a", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "query_start", "agent_name": "PDF Agent", "request_id": "web-chat-1764903855376-98bbh971n"}
{"timestamp": "2025-12-05T03:04:16.388033+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step user_request: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:16.388190+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent generating model response with 3 messages", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 373, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:16.388250+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "System prompt size: 5210 characters", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 281, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:18.997479+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Generated response from AnthropicProvider (model: claude-haiku-4-5-20251001) - No cache usage", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 341, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:18.998367+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent model response:\n```json\n{\n  \"thought\": \"The user is asking about 'CD-150'. This could be a technical term, product code, medical designation, or something else. I should search the uploaded PDFs first to see if there's any information about CD-150 in the user's documents. If not found, I can perform a web search.\",\n  \"type\": \"action\",\n  \"action\": {\n    \"name\": \"fetch_pdf_content\",\n    \"search_type\": \"grep\",\n    \"query\": \"CD-150\",\n    \"max_results\": 10\n  }\n}\n```", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 382, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:18.998448+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing actions from response...", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 520, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:18.998509+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent parsed JSON - thought: The user is asking about 'CD-150'. This could be a technical term, product code, medical designation, type: action", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 569, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:18.998557+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing action: fetch_pdf_content", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 600, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:18.998622+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Response: None", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 761, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:18.998667+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Observation: Observation: {\"success\": false, \"error\": \"Query is required\"}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 762, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.153719+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step thought: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.309774+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step action: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.461398+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Error incrementing turn count in agent PDF Agent action 1: {'message': 'Could not find the function public.increment_request_turns(request_id_param) in the schema cache', 'code': 'PGRST202', 'hint': None, 'details': 'Searched for the function public.increment_request_turns with parameter request_id_param or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.'}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 845, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.461512+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Agent produced observation", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "observation", "agent_name": "PDF Agent", "request_id": "web-chat-1764903855376-98bbh971n"}
{"timestamp": "2025-12-05T03:04:19.611866+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step observation: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.611998+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Action 1/16 executed", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 867, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.612069+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Adding observation to messages: Observation: {\"success\": false, \"error\": \"Query is required\"}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 876, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.612125+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent generating model response with 5 messages", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 373, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:19.612192+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "System prompt size: 5210 characters", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 281, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:21.420233+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Generated response from AnthropicProvider (model: claude-haiku-4-5-20251001) - No cache usage", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 341, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:21.420965+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent model response:\n```json\n{\n  \"thought\": \"I got an error that the query is required. Let me try a semantic search instead to look for information about CD-150 in the PDFs.\",\n  \"type\": \"action\",\n  \"action\": {\n    \"name\": \"fetch_pdf_content\",\n    \"search_type\": \"semantic\",\n    \"query\": \"CD-150\",\n    \"max_results\": 10\n  }\n}\n```", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 382, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.421032+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing actions from response...", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 520, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.421081+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent parsed JSON - thought: I got an error that the query is required. Let me try a semantic search instead to look for informat, type: action", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 569, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.421120+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing action: fetch_pdf_content", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 600, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.421164+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Response: None", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 761, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.421200+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Observation: Observation: {\"success\": false, \"error\": \"Query is required\"}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 762, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.570335+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step thought: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.729726+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step action: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.871497+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Error incrementing turn count in agent PDF Agent action 2: {'message': 'Could not find the function public.increment_request_turns(request_id_param) in the schema cache', 'code': 'PGRST202', 'hint': None, 'details': 'Searched for the function public.increment_request_turns with parameter request_id_param or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.'}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 845, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:21.871657+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Agent produced observation", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "observation", "agent_name": "PDF Agent", "request_id": "web-chat-1764903855376-98bbh971n"}
{"timestamp": "2025-12-05T03:04:22.031376+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step observation: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:22.031499+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Action 2/16 executed", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 867, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:22.031553+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Adding observation to messages: Observation: {\"success\": false, \"error\": \"Query is required\"}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 876, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:22.031594+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent generating model response with 7 messages", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 373, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:22.031638+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "System prompt size: 5210 characters", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 281, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:23.486482+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Generated response from AnthropicProvider (model: claude-haiku-4-5-20251001) - No cache usage", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 341, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:23.487161+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent model response:\n```json\n{\n  \"thought\": \"I'm getting an error from the PDF search. Since I don't have information about CD-150 in the uploaded PDFs, let me perform a web search to find out what CD-150 is.\",\n  \"type\": \"action\",\n  \"action\": {\n    \"name\": \"perplexity_search\",\n    \"query\": \"CD-150\"\n  }\n}\n```", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 382, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:23.487221+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing actions from response...", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 520, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:23.487267+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent parsed JSON - thought: I'm getting an error from the PDF search. Since I don't have information about CD-150 in the uploade, type: action", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 569, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:23.487305+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing action: perplexity_search", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 600, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:23.703353+00:00", "level": "ERROR", "logger": "app.agents.tools.perplexity_tools", "message": "Error checking UBP limits for user 1a473152-13b8-44f8-bf95-21b6f025ea5a: {'message': \"Could not find the table 'public.user_profiles' in the schema cache\", 'code': 'PGRST205', 'hint': None, 'details': None}", "module": "perplexity_tools", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/tools/perplexity_tools.py", "lineno": 89, "funcName": "search_web"}
{"timestamp": "2025-12-05T03:04:23.703540+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Response: None", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 761, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:23.703613+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Observation: Observation: Error: query is required", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 762, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:23.886873+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step thought: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:24.041480+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step action: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:24.204408+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Error incrementing turn count in agent PDF Agent action 3: {'message': 'Could not find the function public.increment_request_turns(request_id_param) in the schema cache', 'code': 'PGRST202', 'hint': None, 'details': 'Searched for the function public.increment_request_turns with parameter request_id_param or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.'}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 845, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:24.204543+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Agent produced observation", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "observation", "agent_name": "PDF Agent", "request_id": "web-chat-1764903855376-98bbh971n"}
{"timestamp": "2025-12-05T03:04:24.364355+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step observation: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:24.364475+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Action 3/16 executed", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 867, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:24.364523+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Adding observation to messages: Observation: Error: query is required", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 876, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:24.364567+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent generating model response with 9 messages", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 373, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:24.364605+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "System prompt size: 5210 characters", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 281, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:28.944405+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Generated response from AnthropicProvider (model: claude-haiku-4-5-20251001) - No cache usage", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 341, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:04:28.945346+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent model response:\n```json\n{\n  \"thought\": \"I'm encountering errors with the search tools. Let me provide a general response based on common knowledge about CD-150. CD-150 typically refers to a cluster of differentiation marker (CD antigen) used in immunology and cell biology research. However, without access to your specific documents or successful web search, I should ask for clarification about the context.\",\n  \"type\": \"response\",\n  \"response\": \"I'm having difficulty searching your documents and performing web searches at the moment. Could you provide more context about CD-150? For example:\\n\\n- Is this related to a medical/immunological marker?\\n- Is it a product code or model number?\\n- Is it from a specific document or field?\\n\\nGenerally, CD-150 could refer to a cluster of differentiation antigen used in immunology, but I'd need more context to give you a precise answer. If you have a specific PDF that mentions CD-150, please let me know the filename and I can search it directly.\"\n}\n```", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 382, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:28.945518+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing actions from response...", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 520, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:28.945606+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent parsed JSON - thought: I'm encountering errors with the search tools. Let me provide a general response based on common kno, type: response", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 569, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:28.945665+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing final response", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 620, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:28.945710+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Response: I'm having difficulty searching your documents and performing web searches at the moment. Could you provide more context about CD-150? For example:\n\n- Is this related to a medical/immunological marker?\n- Is it a product code or model number?\n- Is it from a specific document or field?\n\nGenerally, CD-150 could refer to a cluster of differentiation antigen used in immunology, but I'd need more context to give you a precise answer. If you have a specific PDF that mentions CD-150, please let me know the filename and I can search it directly.", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 761, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:28.945755+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Observation: None", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 762, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:29.081474+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step thought: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:29.258747+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step response: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:04:29.259006+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Agent produced final response", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "final_response", "agent_name": "PDF Agent", "request_id": "web-chat-1764903855376-98bbh971n"}
{"timestamp": "2025-12-05T03:04:29.259110+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Query completed successfully for user 1a473152-13b8-44f8-bf95-21b6f025ea5a", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "query_complete", "agent_name": "PDF Agent", "request_id": "web-chat-1764903855376-98bbh971n"}
{"timestamp": "2025-12-05T03:04:29.259192+00:00", "level": "INFO", "logger": "app.agents.primary_agent.primary_agent", "message": "PDF Agent response generated for request web-chat-1764903855376-98bbh971n", "module": "primary_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/primary_agent/primary_agent.py", "lineno": 166, "funcName": "get_chat_response"}
{"timestamp": "2025-12-05T03:04:29.597533+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Stored assistant response for conversation: 3ff55c8f-f620-4526-bdef-f0d8b784f252", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 351, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:29.597691+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Failed to update request status: 'str' object has no attribute 'data'", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 452, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:29.597754+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Settings updated: True", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 454, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:04:29.598037+00:00", "level": "INFO", "logger": "app.main", "message": "Cache cleaned up for request_id: d2497e87-3f8e-4b18-bea6-c1f14c12a2f8", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 110, "funcName": "log_api_event", "component": "api", "action": "cache_cleanup_success", "request_id": "d2497e87-3f8e-4b18-bea6-c1f14c12a2f8"}
{"timestamp": "2025-12-05T03:04:29.598210+00:00", "level": "INFO", "logger": "app.main", "message": "Request completed: POST /api/chat", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 110, "funcName": "log_api_event", "component": "api", "request_id": "web-chat-1764903855376-98bbh971n"}
{"timestamp": "2025-12-05T03:06:30.943910+00:00", "level": "INFO", "logger": "app.main", "message": "Incoming request - Origin: No Origin header, User-Agent: node, Path: /api/chat", "module": "main", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/main.py", "lineno": 92, "funcName": "error_logging_middleware", "component": "api"}
{"timestamp": "2025-12-05T03:06:30.945507+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Received chat request: message='what is CD-150?', history_count=1, preferences=None, integration_in_progress=False, request_id=web-chat-1764903990941-vejadakgk", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 71, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:31.146916+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Error checking limits for user 1a473152-13b8-44f8-bf95-21b6f025ea5a: {'message': \"Could not find the table 'public.user_profiles' in the schema cache\", 'code': 'PGRST205', 'hint': None, 'details': None}", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 140, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:31.147090+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Failed to create/update request record: name 'update_result' is not defined", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 179, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:31.147148+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Using existing conversation: 2ce4eaa3-1631-4009-aecd-23992b9aae15", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 207, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:31.464197+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Stored user message for conversation: 2ce4eaa3-1631-4009-aecd-23992b9aae15", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 278, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:31.628406+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Failed to update request status to thinking: {'message': \"Could not find the table 'public.requests' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.posts'\", 'details': None}", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 295, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:31.628788+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Initialized AnthropicProvider with model: claude-haiku-4-5-20251001", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 244, "funcName": "__init__", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:06:31.628974+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent using standard (uncached) system prompt", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 201, "funcName": "__init__", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:31.629054+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent initialized with system prompt", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "action": "agent_initialization", "agent_name": "PDF Agent", "system_prompt": "=== Context ===\nYou are a helpful AI assistant. Your capabilties are outlined in the tool descriptions below.\n=== Response Template ===\nYou must respond with valid JSON in one of the following two formats:\n1. When an action IS needed (calling a tool or sub agent):\n```json\n{{\n  \"thought\": \"Your reasoning about what action to take\",\n  \"type\": \"action\",\n  \"action\": {{\n    \"name\": \"action_name\",\n    \"parameters\": {{...}}\n  }}\n}}\n```\nOR\n2. When NO action or NO FURTHER ACTION is needed:\n```json\n{{\n  \"thought\": \"Your reasoning about why no action is needed\", \n  \"type\": \"response\",\n  \"response\": \"Your response\"\n}}\n```\nAlways output valid JSON.  Only one JSON block per response. Think first in the \"thought\" field, then specify the type and appropriate action or response.\n=== Available Actions ===\n```\nName: fetch_pdf_content:\nDescription: Search and retrieve content from uploaded PDF documents. Use 'semantic' search for natural language queries about topics or concepts. Use 'grep' search for specific terms, codes, or exact text patterns.\nAction Parameters:\n    - search_type (string): Search method: 'semantic' for natural language similarity search, 'grep' for exact text pattern matching. Default: 'semantic'\n    - query (string): Search query - for semantic: describe what you're looking for; for grep: the exact text pattern to find\n    - pdf_id (string): Optional: Specific PDF ID to search within. If not provided, searches all user's PDFs.\n    - max_results (integer): Maximum number of results to return. Default: 5\nReturns: JSON object with search results containing page content, page numbers, and relevance scores\nExample Invocation: Action: fetch_pdf_content: {\"search_type\": \"semantic\", \"query\": \"information about AI iterations and human intervention\"}\n```\n\n```\nName: search_pdf_documents:\nDescription: Search for PDF documents by filename. Returns document metadata including document ID, filename, number of pages, and file size. Use this to find which PDFs are available before searching their content with fetch_pdf_content.\nAction Parameters:\n    - filename_query (string): Search term to match against PDF filenames (case-insensitive partial match)\n    - max_results (integer): Maximum number of results to return. Default: 10\nReturns: JSON object with document metadata including document_id, filename, title, num_pages, file_size_bytes, status, and created_at\nExample Invocation: Action: search_pdf_documents: {\"filename_query\": \"report\"}\n```\n\n```\nName: create_pdf:\nDescription: Create a new PDF document containing a summary or report. Use this to generate documents from content you've gathered or created during the conversation.\nAction Parameters:\n    - title (string): Title for the PDF document\n    - content (string): The text content to include in the PDF. Supports basic markdown formatting (headers with #, bullet points with -).\n    - content_type (string): Type of document: 'summary' for brief summaries, 'report' for detailed reports. Default: 'summary'\n    - source_pdf_ids (array): Optional list of PDF IDs that were used as sources for this document\nReturns: JSON object with success status, PDF ID, and filename. The PDF ID can be used with email_pdf to send the document.\nExample Invocation: Action: create_pdf: {\"title\": \"Research Summary\", \"content\": \"# Key Findings\\n- Point 1\\n- Point 2\", \"content_type\": \"summary\"}\n```\n\n```\nName: email_pdf:\nDescription: Send a PDF document to a recipient via email. You will need the user's name and email so if you don't it, please ask them. Use create_pdf first to generate the document, then use this tool to send it.\nAction Parameters:\n    - pdf_id (string): ID of the PDF to send (obtained from create_pdf tool)\n    - recipient_email (string): Email address of the recipient\n    - recipient_name (string): Name of the recipient\n    - subject (string): Optional email subject line. Defaults to the PDF title.\n    - message (string): Optional message to include in the email body\nReturns: JSON object with success status and email ID\nExample Invocation: Action: email_pdf: {\"pdf_id\": \"abc123-def456\", \"recipient_email\": \"user@example.com\", \"recipient_name\": \"John Doe\", \"subject\": \"Your requested document\"}\n```\n\n```\nName: perplexity_search:\nDescription: Perform a general web search using Perplexity AI. Use this to find information that may not be in the uploaded PDFs.\nAction Parameters:\n    - query (string): Search query\n    - max_tokens (integer): Maximum tokens (default: 2000, max: 4000)\n    - temperature (number): Temperature (0.0-2.0, default: 0.1)\n    - system_prompt (string): System prompt for the model\nReturns: JSON object with search results and citations\nExample Invocation: Action: perplexity_search: \"{\"query\": \"latest research on renewable energy\"}\"\n```\n=== General Instructions ===\n- When your response to another agent includes cached data, include the cache key in your response rather than the cached content itself.  All agents have the fetch_from_cache tool.\n=== Additional Instructions/Context ===\n\n- Current date/time: 2025-12-04 21:06:31\nGuidelines:\n- Keep responses concise unless the user asks for more detail\n- Always cite which PDF/page the information came from when retrieving content\n"}
{"timestamp": "2025-12-05T03:06:31.629161+00:00", "level": "INFO", "logger": "app.agents.primary_agent.primary_agent", "message": "Initialized PDF Agent for user 1a473152-13b8-44f8-bf95-21b6f025ea5a", "module": "primary_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/primary_agent/primary_agent.py", "lineno": 123, "funcName": "__init__"}
{"timestamp": "2025-12-05T03:06:31.629232+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Starting query processing for user 1a473152-13b8-44f8-bf95-21b6f025ea5a", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "query_start", "agent_name": "PDF Agent", "request_id": "web-chat-1764903990941-vejadakgk"}
{"timestamp": "2025-12-05T03:06:31.798059+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step user_request: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:31.798232+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent generating model response with 3 messages", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 373, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:31.798304+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "System prompt size: 5210 characters", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 281, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:06:34.327318+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Generated response from AnthropicProvider (model: claude-haiku-4-5-20251001) - No cache usage", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 341, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:06:34.328015+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent model response:\n```json\n{\n  \"thought\": \"The user is asking about 'CD-150'. This could be a technical term, product code, medical designation, or something else. I should search the uploaded PDFs first to see if there's any information about CD-150 in the user's documents. If not found, I can perform a web search.\",\n  \"type\": \"action\",\n  \"action\": {\n    \"name\": \"fetch_pdf_content\",\n    \"parameters\": {\n      \"search_type\": \"grep\",\n      \"query\": \"CD-150\",\n      \"max_results\": 10\n    }\n  }\n}\n```", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 382, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:34.328088+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing actions from response...", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 520, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:34.328132+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent parsed JSON - thought: The user is asking about 'CD-150'. This could be a technical term, product code, medical designation, type: action", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 569, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:34.328166+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing action: fetch_pdf_content", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 600, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:34.328209+00:00", "level": "INFO", "logger": "app.agents.tools.fetch_pdf_content", "message": "Fetching PDF content for user 1a473152-13b8-44f8-bf95-21b6f025ea5a, search_type: grep, query: CD-150...", "module": "fetch_pdf_content", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/tools/fetch_pdf_content.py", "lineno": 55, "funcName": "fetch_pdf_content"}
{"timestamp": "2025-12-05T03:06:34.328264+00:00", "level": "INFO", "logger": "app.services.semantic_search", "message": "Starting PDF page text search for user 1a473152-13b8-44f8-bf95-21b6f025ea5a", "module": "semantic_search", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/services/semantic_search.py", "lineno": 1256, "funcName": "search_pdf_pages_by_text", "component": "search", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "search_pdf_pages_text_start"}
{"timestamp": "2025-12-05T03:06:34.624551+00:00", "level": "INFO", "logger": "app.services.semantic_search", "message": "PDF page text search completed", "module": "semantic_search", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/services/semantic_search.py", "lineno": 1300, "funcName": "search_pdf_pages_by_text", "component": "search", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "search_pdf_pages_text_complete"}
{"timestamp": "2025-12-05T03:06:34.626151+00:00", "level": "INFO", "logger": "app.agents.tools.fetch_pdf_content", "message": "Found 2 results for query", "module": "fetch_pdf_content", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/tools/fetch_pdf_content.py", "lineno": 113, "funcName": "fetch_pdf_content"}
{"timestamp": "2025-12-05T03:06:34.626911+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Response: None", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 761, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:34.627657+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Observation: Observation: {\n  \"success\": true,\n  \"search_type\": \"grep\",\n  \"query\": \"CD-150\",\n  \"total_results\": 2,\n  \"results\": [\n    {\n      \"page_number\": 5,\n      \"pdf_id\": \"6864fec4-0b73-4328-a89a-87b7d8dcdfad\",\n      \"content\": \"2022 Colorado Community Corrections Standards   \\nPublish ed: October 2022   4 | Page  \\n CD-120: Level System  45 \\nCD-130: Passes/Privilege Furloughs  46 \\nCD-131: Cell Phones  46 \\nCD-132: Driving  46 \\nCD-140: Measurement/Feedback  47 \\nCD-150: Incentives  47 \\nCD-160: Disciplinary  48 \\nCD-161: Sanctions  48 \\nCD-162: Hearings  48 \\nCD-163: Review for Termination  48 \\nCD-164: Disciplinary Appeals  48 \\nCD-170: Supervision of Sex Offenders  49 \\nCD-180: Time Credit/Sentence Calculation  49 \\nCD-190: Employment Services  49 \\nCD-200: Employment Status Updates  51 \\nGlossary  52 \\nA 52 \\nB 52 \\nC 52 \\nD 53 \\nE 54 \\nF 54 \\nG 54 \\nH 54 \\nI 54 \\nJ 55 \\nL 55 \\nM 55 \\nN 55 \\nO 56 \\nP 56 \\nR 57\",\n      \"match_count\": 1\n    },\n    {\n      \"page_number\": 48,\n      \"pdf_id\": \"6864fec4-0b73-4328-a89a-87b7d8dcdfad\",\n      \"content\": \"2022 Colorado Community Corrections Standards   \\nPublish ed: October 2022   47 | Page  \\n CD-140: Measurement/Feedback  \\nThe program shall have written policies, procedures and established practices to \\nsystematically measure client progress and provide feedback. Program staff shall routinely \\nassess client progress on cri minogenic needs, responsivity factors, and risk. Feedback shall be \\ngiven to the client in order to build accountability, enhance skill development, and increase \\nmotivation for change. Feedback should be given once assessments are completed, as action \\nsteps  are completed, at level change and additionally as needed. Feedback should be given in \\ncontact types specified in CD-050.  \\n \\nCD-150: Incentives  \\nThe program shall have written policies, procedures, and established practices for the use of \\nContingency Manag ement following the principles of transparency, swiftness, magnitude, \\nduration, and frequency of incentives. Within the intake process, each client shall be advised \\nin writing about the incentives program. There shall be early and frequent opportunities to  \\nreceive incentives and incentives shall be targeted to specific behaviors that are identified as \\ncriminogenic in nature. Clients should be given an opportunity to give input on rewards. \\nPrograms should derive their rewards from this input, when possible, and shall emphasize \\npositive reinforcement.  \\n \\nIntent/Clarification:  \\u201cWhen learning new skills and making behavioral changes, most people \\nappear to respond better and maintain learned behaviors for longer periods of time, when \\napproached with carrots rather than sticks. Behaviorists recommend applying a much higher \\nratio of positive reinforcements to negative reinforcements in order to better achieve \\nsustained behavioral change. Research indicates that a ratio of four positive to every one \\nnegative reinforcem ent is optimal for promoting behavior changes. Increasing positive \\nreinforcement should not be done at the expen... [truncated]\",\n      \"match_count\": 1\n    }\n  ]\n}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 762, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:34.779097+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step thought: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:34.935532+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step action: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:35.132115+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Error incrementing turn count in agent PDF Agent action 1: {'message': 'Could not find the function public.increment_request_turns(request_id_param) in the schema cache', 'code': 'PGRST202', 'hint': None, 'details': 'Searched for the function public.increment_request_turns with parameter request_id_param or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.'}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 845, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:35.132254+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Agent produced observation", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "observation", "agent_name": "PDF Agent", "request_id": "web-chat-1764903990941-vejadakgk"}
{"timestamp": "2025-12-05T03:06:35.308323+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step observation: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:35.308507+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Action 1/16 executed", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 867, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:35.308570+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Adding observation to messages: Observation: {\n  \"success\": true,\n  \"search_type\": \"grep\",\n  \"query\": \"CD-150\",\n  \"total_results\": 2,\n  \"results\": [\n    {\n      \"page_number\": 5,\n      \"pdf_id\": \"6864fec4-0b73-4328-a89a-87b7d8dcdfad\",\n      \"content\": \"2022 Colorado Community Corrections Standards   \\nPublish ed: October 2022   4 | Page  \\n CD-120: Level System  45 \\nCD-130: Passes/Privilege Furloughs  46 \\nCD-131: Cell Phones  46 \\nCD-132: Driving  46 \\nCD-140: Measurement/Feedback  47 \\nCD-150: Incentives  47 \\nCD-160: Disciplinary  48 \\nCD-161: Sanctions  48 \\nCD-162: Hearings  48 \\nCD-163: Review for Termination  48 \\nCD-164: Disciplinary Appeals  48 \\nCD-170: Supervision of Sex Offenders  49 \\nCD-180: Time Credit/Sentence Calculation  49 \\nCD-190: Employment Services  49 \\nCD-200: Employment Status Updates  51 \\nGlossary  52 \\nA 52 \\nB 52 \\nC 52 \\nD 53 \\nE 54 \\nF 54 \\nG 54 \\nH 54 \\nI 54 \\nJ 55 \\nL 55 \\nM 55 \\nN 55 \\nO 56 \\nP 56 \\nR 57\",\n      \"match_count\": 1\n    },\n    {\n      \"page_number\": 48,\n      \"pdf_id\": \"6864fec4-0b73-4328-a89a-87b7d8dcdfad\",\n      \"content\": \"2022 Colorado Community Corrections Standards   \\nPublish ed: October 2022   47 | Page  \\n CD-140: Measurement/Feedback  \\nThe program shall have written policies, procedures and established practices to \\nsystematically measure client progress and provide feedback. Program staff shall routinely \\nassess client progress on cri minogenic needs, responsivity factors, and risk. Feedback shall be \\ngiven to the client in order to build accountability, enhance skill development, and increase \\nmotivation for change. Feedback should be given once assessments are completed, as action \\nsteps  are completed, at level change and additionally as needed. Feedback should be given in \\ncontact types specified in CD-050.  \\n \\nCD-150: Incentives  \\nThe program shall have written policies, procedures, and established practices for the use of \\nContingency Manag ement following the principles of transparency, swiftness, magnitude, \\nduration, and frequency of incentives. Within the intake process, each client shall be advised \\nin writing about the incentives program. There shall be early and frequent opportunities to  \\nreceive incentives and incentives shall be targeted to specific behaviors that are identified as \\ncriminogenic in nature. Clients should be given an opportunity to give input on rewards. \\nPrograms should derive their rewards from this input, when possible, and shall emphasize \\npositive reinforcement.  \\n \\nIntent/Clarification:  \\u201cWhen learning new skills and making behavioral changes, most people \\nappear to respond better and maintain learned behaviors for longer periods of time, when \\napproached with carrots rather than sticks. Behaviorists recommend applying a much higher \\nratio of positive reinforcements to negative reinforcements in order to better achieve \\nsustained behavioral change. Research indicates that a ratio of four positive to every one \\nnegative reinforcem ent is optimal for promoting behavior changes. Increasing positive \\nreinforcement should not be done at the expen... [truncated]\",\n      \"match_count\": 1\n    }\n  ]\n}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 876, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:35.308723+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent generating model response with 5 messages", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 373, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:35.308783+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "System prompt size: 5210 characters", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 281, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:06:41.187899+00:00", "level": "INFO", "logger": "app.agents.model_providers", "message": "Generated response from AnthropicProvider (model: claude-haiku-4-5-20251001) - No cache usage", "module": "model_providers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/model_providers.py", "lineno": 341, "funcName": "generate_response", "component": "agent", "agent_name": "AnthropicProvider"}
{"timestamp": "2025-12-05T03:06:41.188612+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent model response:\n```json\n{\n  \"thought\": \"Great! I found information about CD-150 in the user's PDFs. It's from the 2022 Colorado Community Corrections Standards document. CD-150 refers to 'Incentives' - a standard about how community corrections programs should use contingency management and positive reinforcement. I have the detailed information from page 48, so I can provide a comprehensive answer.\",\n  \"type\": \"response\",\n  \"response\": \"**CD-150: Incentives**\\n\\nCD-150 is a standard from the **2022 Colorado Community Corrections Standards** that establishes guidelines for how community corrections programs should implement incentive programs.\\n\\nKey requirements include:\\n\\n- **Written Policies**: Programs must have written policies, procedures, and established practices for using Contingency Management\\n- **Core Principles**: Incentives should follow principles of transparency, swiftness, magnitude, duration, and frequency\\n- **Client Notification**: Clients must be advised in writing about the incentives program during intake\\n- **Frequent Opportunities**: There should be early and frequent opportunities to receive incentives\\n- **Targeted Behaviors**: Incentives should target specific behaviors identified as criminogenic in nature\\n- **Client Input**: Clients should have opportunities to provide input on rewards, and programs should emphasize positive reinforcement\\n\\n**Rationale**: The standard is based on behavioral research showing that people respond better to positive reinforcement (\\\"carrots\\\") rather than punishment (\\\"sticks\\\") when learning new skills and making behavioral changes. Research indicates that a ratio of four positive reinforcements to every one negative reinforcement is optimal for promoting sustained behavioral change.\\n\\n*Source: 2022 Colorado Community Corrections Standards, Page 48*\"\n}\n```", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 382, "funcName": "execute", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.188813+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing actions from response...", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 520, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.188891+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent parsed JSON - thought: Great! I found information about CD-150 in the user's PDFs. It's from the 2022 Colorado Community Co, type: response", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 569, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.188946+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "PDF Agent processing final response", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 620, "funcName": "process_actions", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.188992+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Response: **CD-150: Incentives**\n\nCD-150 is a standard from the **2022 Colorado Community Corrections Standards** that establishes guidelines for how community corrections programs should implement incentive programs.\n\nKey requirements include:\n\n- **Written Policies**: Programs must have written policies, procedures, and established practices for using Contingency Management\n- **Core Principles**: Incentives should follow principles of transparency, swiftness, magnitude, duration, and frequency\n- **Client Notification**: Clients must be advised in writing about the incentives program during intake\n- **Frequent Opportunities**: There should be early and frequent opportunities to receive incentives\n- **Targeted Behaviors**: Incentives should target specific behaviors identified as criminogenic in nature\n- **Client Input**: Clients should have opportunities to provide input on rewards, and programs should emphasize positive reinforcement\n\n**Rationale**: The standard is based on behavioral research showing that people respond better to positive reinforcement (\"carrots\") rather than punishment (\"sticks\") when learning new skills and making behavioral changes. Research indicates that a ratio of four positive reinforcements to every one negative reinforcement is optimal for promoting sustained behavioral change.\n\n*Source: 2022 Colorado Community Corrections Standards, Page 48*", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 761, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.189118+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Observation: None", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 762, "funcName": "query", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.366140+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step thought: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.533545+00:00", "level": "ERROR", "logger": "app.agents.base_agent", "message": "Failed to log MAS step response: {'message': \"Could not find the table 'public.mas_logs' in the schema cache\", 'code': 'PGRST205', 'hint': \"Perhaps you meant the table 'public.messages'\", 'details': None}", "module": "base_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/base_agent.py", "lineno": 260, "funcName": "_log_mas_step", "component": "agent", "agent_name": "PDF Agent"}
{"timestamp": "2025-12-05T03:06:41.535606+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Agent produced final response", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "final_response", "agent_name": "PDF Agent", "request_id": "web-chat-1764903990941-vejadakgk"}
{"timestamp": "2025-12-05T03:06:41.535680+00:00", "level": "INFO", "logger": "app.agents.base_agent", "message": "Query completed successfully for user 1a473152-13b8-44f8-bf95-21b6f025ea5a", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 86, "funcName": "log_agent_event", "component": "agent", "user_id": "1a473152-13b8-44f8-bf95-21b6f025ea5a", "action": "query_complete", "agent_name": "PDF Agent", "request_id": "web-chat-1764903990941-vejadakgk"}
{"timestamp": "2025-12-05T03:06:41.535731+00:00", "level": "INFO", "logger": "app.agents.primary_agent.primary_agent", "message": "PDF Agent response generated for request web-chat-1764903990941-vejadakgk", "module": "primary_agent", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/agents/primary_agent/primary_agent.py", "lineno": 166, "funcName": "get_chat_response"}
{"timestamp": "2025-12-05T03:06:41.847353+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Stored assistant response for conversation: 2ce4eaa3-1631-4009-aecd-23992b9aae15", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 351, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:41.847492+00:00", "level": "ERROR", "logger": "app.endpoints.chat", "message": "Failed to update request status: 'str' object has no attribute 'data'", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 452, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:41.847535+00:00", "level": "INFO", "logger": "app.endpoints.chat", "message": "Settings updated: True", "module": "chat", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/endpoints/chat.py", "lineno": 454, "funcName": "chat_endpoint", "component": "api"}
{"timestamp": "2025-12-05T03:06:41.847715+00:00", "level": "INFO", "logger": "app.main", "message": "Cache cleaned up for request_id: 24612ddf-4eb2-433f-9d5b-384e211994da", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 110, "funcName": "log_api_event", "component": "api", "action": "cache_cleanup_success", "request_id": "24612ddf-4eb2-433f-9d5b-384e211994da"}
{"timestamp": "2025-12-05T03:06:41.847854+00:00", "level": "INFO", "logger": "app.main", "message": "Request completed: POST /api/chat", "module": "component_loggers", "pathname": "/Users/cameronhightower/Software_Projects/pdf_agent_fastapi/app/utils/logging/component_loggers.py", "lineno": 110, "funcName": "log_api_event", "component": "api", "request_id": "web-chat-1764903990941-vejadakgk"}
